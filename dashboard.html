<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title>Admin Dashboard | Master</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body { font-family: 'Montserrat', sans-serif; background: #060F1A; color: white; padding: 20px; }
    .unit-row { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 1rem; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; }
  </style>
</head>
<body>
  <div class="flex justify-between items-center mb-8 mt-4 px-2">
    <h1 class="text-xl font-800 uppercase text-[#C9A84C]">Dashboard</h1>
    <button onclick="location.href='edit.html'" class="bg-[#C9A84C] text-[#060F1A] px-4 py-2 rounded-lg font-800 text-[10px] uppercase shadow-lg shadow-gold/10"><i class="fas fa-plus mr-2"></i>Add Unit</button>
  </div>
  
  <input type="text" id="sI" onkeyup="filter()" placeholder="Search HP-ID or Plot..." class="w-full bg-white/5 border border-white/10 rounded-xl px-5 py-3 mb-6 outline-none focus:border-[#C9A84C] text-sm font-600">
  
  <div id="list"></div>

  <script>
    const API = "https://script.google.com/macros/s/AKfycbyOnZc6s05eGvHR5XmRnRPAat8vNZpf8cFhL2GiAFjWld-2OBf2OqgP07RU07UTZgDXxA/exec";
    let data = [];

    async function init() {
      const res = await fetch(`${API}?mode=getListSmall&project=all`);
      data = await res.json(); render(data);
    }

    function render(items) {
      document.getElementById('list').innerHTML = items.map(u => `
        <div class="unit-row">
          <img src="${u.Thumbnail_Image}" class="w-16 h-16 rounded-lg object-cover bg-black">
          <div class="flex-1 min-width-0">
            <div class="text-[9px] text-slate-500 font-800">#${u.HP_ID}</div>
            <div class="font-800 text-sm truncate uppercase">Plot ${u.Plot || 'N/A'}</div>
            <div class="text-[9px] text-[#C9A84C] font-700">${u.Status} | ${u.Project_Name}</div>
          </div>
          <button onclick="location.href='edit.html?id=${u.HP_ID}'" class="bg-white/10 p-3 rounded-xl hover:bg-[#C9A84C] hover:text-black transition-all">
            <i class="fas fa-edit text-xs"></i>
          </button>
        </div>
      `).join('');
    }

    function filter() {
      const q = document.getElementById('sI').value.toLowerCase();
      render(data.filter(u => u.HP_ID.toLowerCase().includes(q) || (u.Plot && u.Plot.toLowerCase().includes(q))));
    }
    window.onload = init;
  </script>
</body>
</html>
