<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
  <title>Hua Hin Properties | Prime Asset Catalog</title>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@200;300;400;500;600&family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>

  <style>
    :root {
      --navy: #0B1829;
      --navy-dark: #060F1A;
      --gold: #C9A84C;
      --gold-lt: #E4C46A;
      --white: #FDFAF5;
      --muted: #7A9BB5;
      --border: rgba(255, 255, 255, 0.08);
      --card-bg: rgba(11, 24, 41, 0.92);
      --brand-red: #8B1F2D;
      --brand-red-lt: #B12A3B;
      
      --available: #2ECC8A;
      --reserved: #E8A020;
      --sold: #E05555;
      --rented: #5B9BD5;

      --px: 12px;
      --radius: 8px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background-color: var(--navy-dark);
      color: var(--white);
      font-family: 'Montserrat', 'Sarabun', sans-serif;
      line-height: 1.5;
      overflow-x: hidden;
    }

    /* ‚ïê‚ïê‚ïê BACKGROUND ‚ïê‚ïê‚ïê */
    body::before {
      content: '';
      position: fixed; inset: 0;
      background: radial-gradient(circle at 50% -10%, rgba(27, 79, 114, 0.25) 0%, transparent 70%);
      z-index: -1;
    }

    /* ‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê */
    header {
      position: fixed; top: 0; width: 100%; height: 55px;
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 var(--px); background: rgba(6, 15, 26, 0.95);
      backdrop-filter: blur(10px); z-index: 1000;
      border-bottom: 1px solid var(--border);
    }
    .logo { font-size: 1.1rem; font-weight: 700; color: var(--gold); text-decoration: none; letter-spacing: 0.05em; }
    .logo span { color: var(--white); font-weight: 300; }
    .btn-contact {
      background: var(--gold); color: var(--navy-dark);
      padding: 6px 14px; border-radius: 4px; font-size: 0.65rem;
      font-weight: 800; text-decoration: none; text-transform: uppercase;
    }

    /* ‚ïê‚ïê‚ïê HERO ‚ïê‚ïê‚ïê */
    .hero { padding: 85px var(--px) 20px; text-align: center; }
    .hero-title { font-size: 2.1rem; font-weight: 300; margin-bottom: 15px; letter-spacing: 0.02em; }
    
    /* ‚ïê‚ïê‚ïê SEARCH & FILTERS ‚ïê‚ïê‚ïê */
    .search-container { max-width: 600px; margin: 0 auto; }
    .search-box {
      position: relative; margin-bottom: 12px;
    }
    .search-input {
      width: 100%; background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--border); border-radius: 50px;
      padding: 10px 15px 10px 40px; color: var(--white);
      font-size: 0.9rem; font-family: 'Sarabun', sans-serif;
    }
    .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--gold); }

    .dropdown-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px; }
    .filter-select {
      background: rgba(255, 255, 255, 0.06); border: 1px solid var(--border);
      border-radius: 6px; padding: 8px; color: var(--sand); font-size: 0.75rem;
      color: var(--white); outline: none; font-family: 'Sarabun', sans-serif;
    }

    .pill-scroll {
      display: flex; gap: 8px; overflow-x: auto; padding-bottom: 5px;
      scrollbar-width: none;
    }
    .pill-scroll::-webkit-scrollbar { display: none; }
    .pill {
      white-space: nowrap; padding: 6px 15px; border-radius: 50px;
      background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border);
      color: var(--muted); font-size: 0.65rem; font-weight: 700; text-transform: uppercase;
      cursor: pointer; transition: 0.3s;
    }
    .pill.active { background: var(--gold); color: var(--navy-dark); border-color: var(--gold); }

    /* ‚ïê‚ïê‚ïê LISTINGS ‚ïê‚ïê‚ïê */
    .section-title-bar {
      display: flex; justify-content: space-between; align-items: baseline;
      padding: 25px var(--px) 10px; border-top: 1px solid var(--border); margin-top: 15px;
    }
    .section-title { font-size: 1.2rem; font-weight: 300; color: var(--white); }
    .unit-count { font-size: 0.6rem; color: var(--muted); text-transform: uppercase; font-weight: 700; }

    .listing-grid { display: grid; grid-template-columns: 1fr; gap: 8px; padding: 0 var(--px) 40px; }

    /* ‚ïê‚ïê‚ïê PROPERTY CARD ‚ïê‚ïê‚ïê */
    .card {
      background: var(--card-bg); border: 1px solid var(--border);
      border-radius: 10px; display: flex; overflow: hidden;
      text-decoration: none; color: inherit; height: 115px;
    }
    .card-img { width: 140px; position: relative; flex-shrink: 0; }
    .card-img img { width: 100%; height: 100%; object-fit: cover; }
    .hp-id {
      position: absolute; top: 6px; left: 6px; background: rgba(0,0,0,0.5);
      color: white; font-size: 0.5rem; padding: 2px 5px; border-radius: 2px; font-weight: 700;
    }

    .card-content { flex-grow: 1; padding: 10px 12px; display: flex; flex-direction: column; justify-content: space-between; min-width: 0; }
    .prop-title { font-size: 0.95rem; font-weight: 600; color: var(--white); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .prop-specs { font-size: 0.75rem; color: var(--muted); margin-top: 2px; }
    .prop-zone { font-size: 0.7rem; color: var(--muted); opacity: 0.7; }

    .price-side { display: flex; flex-direction: column; align-items: flex-end; justify-content: space-between; padding: 10px 12px 10px 0; }
    .price { font-size: 1.1rem; font-weight: 700; color: var(--gold-lt); }
    .status-tags { display: flex; flex-direction: column; gap: 4px; align-items: flex-end; }
    .tag { font-size: 0.45rem; font-weight: 800; padding: 2px 6px; border-radius: 3px; text-transform: uppercase; letter-spacing: 0.5px; }
    .tag-status { background: rgba(255,255,255,0.1); color: var(--white); border: 1px solid rgba(255,255,255,0.2); }
    .tag-badge { background: var(--brand-red); color: white; }

    /* ‚ïê‚ïê‚ïê SKELETON ‚ïê‚ïê‚ïê */
    .skeleton { background: rgba(255,255,255,0.05); height: 115px; border-radius: 10px; animation: pulse 1.5s infinite; }
    @keyframes pulse { 50% { opacity: 0.5; } }

    /* ‚ïê‚ïê‚ïê RESPONSIVE ‚ïê‚ïê‚ïê */
    @media (min-width: 768px) {
      .listing-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; }
      .card { height: 130px; }
      .card-img { width: 180px; }
    }
  </style>
</head>
<body>

  <header>
    <a href="#" class="logo">HUA HIN<span>.PROPERTIES</span></a>
    <a href="https://line.me/R/ti/p/@qap7218t" class="btn-contact">Contact</a>
  </header>

  <section class="hero">
    <h1 class="hero-title">Prime Asset Catalog</h1>
    
    <div class="search-container">
      <div class="search-box">
        <span class="search-icon">üîç</span>
        <input type="text" id="searchInput" class="search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤... Pool Villa, Sea View, ‡∏´‡∏±‡∏ß‡∏´‡∏¥‡∏ô...">
      </div>

      <div class="dropdown-grid">
        <select id="areaFilter" class="filter-select">
          <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
          <option value="Hua Hin">‡∏´‡∏±‡∏ß‡∏´‡∏¥‡∏ô</option>
          <option value="Cha-am">‡∏ä‡∏∞‡∏≠‡∏≥</option>
          <option value="Pranburi">‡∏õ‡∏£‡∏≤‡∏ì‡∏ö‡∏∏‡∏£‡∏µ</option>
        </select>
        <select id="priceFilter" class="filter-select">
          <option value="">‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤</option>
          <option value="0-5000000">‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5 ‡∏•‡πâ‡∏≤‡∏ô</option>
          <option value="5000000-15000000">5 - 15 ‡∏•‡πâ‡∏≤‡∏ô</option>
          <option value="15000000-999999999">15 ‡∏•‡πâ‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ</option>
        </select>
        <select id="bedFilter" class="filter-select">
          <option value="">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3+</option>
        </select>
      </div>

      <div class="pill-scroll" id="pillContainer">
        <div class="pill active" data-type="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
        <div class="pill" data-type="Sale">‡∏Ç‡∏≤‡∏¢</div>
        <div class="pill" data-type="Rent">‡πÄ‡∏ä‡πà‡∏≤</div>
        <div class="pill" data-type="Pool Villa">Pool Villa</div>
        <div class="pill" data-type="Condo">Condo</div>
        <div class="pill" data-type="Available">Available</div>
      </div>
    </div>
  </section>

  <div class="section-title-bar">
    <h2 class="section-title">Luxury Collections</h2>
    <span class="unit-count" id="unitCount">0 Units</span>
  </div>

  <section class="listing-grid" id="listingGrid">
    <div class="skeleton"></div>
    <div class="skeleton"></div>
    <div class="skeleton"></div>
    <div class="skeleton"></div>
  </section>

  <script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyOnZc6s05eGvHR5XmRnRPAat8vNZpf8cFhL2GiAFjWld-2OBf2OqgP07RU07UTZgDXxA/exec';
    let allProperties = [];

    async function fetchProperties() {
      try {
        const response = await fetch(SCRIPT_URL + '?mode=getUnitList');
        const result = await response.json();
        allProperties = result.data.filter(p => p.System_Status === 'Live');
        renderProperties(allProperties);
      } catch (error) {
        console.error("Fetch error:", error);
      }
    }

    function renderProperties(data) {
      const grid = document.getElementById('listingGrid');
      const count = document.getElementById('unitCount');
      count.innerText = `${data.length} UNITS`;
      
      grid.innerHTML = data.map(p => {
        const price = p.Listing_Type === 'Sale' 
          ? `‡∏ø${parseFloat(p.Sale_Price.replace(/,/g, '')).toLocaleString()}`
          : `‡∏ø${parseFloat(p.Monthly_Rent.replace(/,/g, '')).toLocaleString()}/mo`;

        return `
          <a href="details.html?id=${p.HP_ID}" class="card">
            <div class="card-img">
              <span class="hp-id">#${p.HP_ID}</span>
              <img src="${p.Thumbnail_Image}" alt="${p.Project_Name}" loading="lazy">
            </div>
            <div class="card-content">
              <div>
                <div class="prop-title">${p.Listing_Type}: ${p.District}</div>
                <div class="prop-specs">${p.Bedrooms} Bed | ${p.Bathrooms} Bath | ${p.Living_Area_sq_m} sqm</div>
              </div>
              <div class="prop-zone">Zone: ${p.Zone}</div>
            </div>
            <div class="price-side">
              <div class="price">${price}</div>
              <div class="status-tags">
                <span class="tag tag-status">${p.Status}</span>
                ${p.Badge ? `<span class="tag tag-badge">${p.Badge}</span>` : ''}
              </div>
            </div>
          </a>
        `;
      }).join('');
    }

    // ‚ïê‚ïê‚ïê FILTER LOGIC ‚ïê‚ïê‚ïê
    function applyFilters() {
      const search = document.getElementById('searchInput').value.toLowerCase();
      const area = document.getElementById('areaFilter').value;
      const bed = document.getElementById('bedFilter').value;
      const typePill = document.querySelector('.pill.active').dataset.type;

      const filtered = allProperties.filter(p => {
        const matchSearch = p.District.toLowerCase().includes(search) || p.HP_ID.toLowerCase().includes(search) || p.Project_Name.toLowerCase().includes(search);
        const matchArea = area === "" || p.District === area;
        const matchBed = bed === "" || (bed === "3" ? parseInt(p.Bedrooms) >= 3 : p.Bedrooms == bed);
        const matchType = typePill === "all" || p.Listing_Type === typePill || p.Type === typePill || p.Status === typePill;
        
        return matchSearch && matchArea && matchBed && matchType;
      });

      renderProperties(filtered);
    }

    document.getElementById('searchInput').addEventListener('input', applyFilters);
    document.getElementById('areaFilter').addEventListener('change', applyFilters);
    document.getElementById('bedFilter').addEventListener('change', applyFilters);
    
    document.getElementById('pillContainer').addEventListener('click', (e) => {
      if (e.target.classList.contains('pill')) {
        document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
        e.target.classList.add('active');
        applyFilters();
      }
    });

    fetchProperties();
  </script>
</body>
</html>
