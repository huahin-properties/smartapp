<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0"/>
  <title>Property Details | Hua Hin Properties</title>
  <meta name="description" content="à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸­à¸ªà¸±à¸‡à¸«à¸²à¸£à¸´à¸¡à¸—à¸£à¸±à¸à¸¢à¹Œà¸£à¸°à¸”à¸±à¸š Luxury à¹ƒà¸™à¸«à¸±à¸§à¸«à¸´à¸™"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Sarabun:wght@300;400;500;600&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --navy:      #0B1829;
      --navy-mid:  #112238;
      --navy-soft: #1a3350;
      --ocean:     #1B4F72;
      --teal:      #1A7A8A;
      --sand:      #F5EDD8;
      --sand-dim:  #C8B898;
      --gold:      #C9A84C;
      --gold-lt:   #E4C46A;
      --gold-glow: rgba(201,168,76,0.15);
      --white:     #FDFAF5;
      --muted:     #7A9BB5;
      --border:    rgba(255,255,255,0.09);
      --card-bg:   rgba(17,34,56,0.85);
      --available: #2ECC8A;
      --reserved:  #E8A020;
      --sold:      #E05555;
      --rented:    #5B9BD5;
      --trans:     0.3s cubic-bezier(0.4,0,0.2,1);
      --px:        18px;
      --px-lg:     52px;
      --radius:    8px;
    }

    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth;-webkit-tap-highlight-color:transparent}
    body{
      background:var(--navy);
      color:var(--sand);
      font-family:'Sarabun',sans-serif;
      font-weight:300;
      min-height:100dvh;
      overflow-x:hidden;
    }

    body::before{
      content:'';
      position:fixed;inset:0;
      background:
        radial-gradient(ellipse 80% 50% at 50% -10%,rgba(27,79,114,0.4) 0%,transparent 60%),
        linear-gradient(180deg,#060F1A 0%,#0B1829 50%,#0D1F35 100%);
      pointer-events:none;z-index:0;
    }

    /* â•â•â• HEADER â•â•â• */
    header{
      position:fixed;top:0;left:0;right:0;z-index:300;
      height:56px;
      display:flex;align-items:center;justify-content:space-between;
      padding:0 var(--px);
      background:rgba(6,15,26,0.92);
      backdrop-filter:blur(20px);
      border-bottom:1px solid var(--border);
    }
    .btn-back{
      display:flex;align-items:center;gap:8px;
      color:var(--muted);text-decoration:none;
      font-family:'Montserrat',sans-serif;
      font-size:0.65rem;letter-spacing:0.15em;text-transform:uppercase;
      transition:color var(--trans);
    }
    .btn-back:hover{color:var(--gold)}
    .btn-back svg{transition:transform var(--trans)}
    .btn-back:hover svg{transform:translateX(-3px)}

    .logo{
      font-family:'Cormorant Garamond',serif;
      font-size:1rem;font-weight:400;
      letter-spacing:0.1em;text-transform:uppercase;
      color:var(--gold);text-decoration:none;
    }
    .logo span{color:var(--sand);font-style:italic;font-weight:300}

    .header-id{
      font-family:'Montserrat',sans-serif;
      font-size:0.6rem;color:var(--muted);
      letter-spacing:0.1em;
    }

    /* â•â•â• LOADING STATE â•â•â• */
    .page-loader{
      position:fixed;inset:0;z-index:500;
      background:var(--navy);
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      gap:16px;
      transition:opacity 0.5s ease;
    }
    .page-loader.hidden{opacity:0;pointer-events:none}
    .loader-ring{
      width:40px;height:40px;border-radius:50%;
      border:2px solid var(--border);
      border-top-color:var(--gold);
      animation:spin 0.8s linear infinite;
    }
    .loader-text{
      font-family:'Montserrat',sans-serif;
      font-size:0.6rem;letter-spacing:0.25em;text-transform:uppercase;color:var(--muted);
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* â•â•â• ERROR PAGE â•â•â• */
    .error-page{
      display:none;
      position:relative;z-index:1;
      text-align:center;
      padding:120px var(--px) 60px;
    }
    .error-page.show{display:block}

    /* â•â•â• MAIN CONTENT â•â•â• */
    .content{
      position:relative;z-index:1;
      padding-top:56px;
      opacity:0;transition:opacity 0.5s ease;
    }
    .content.show{opacity:1}

    /* â•â•â• GALLERY SLIDER â•â•â• */
    .gallery-wrap{
      position:relative;
      background:#060F1A;
      overflow:hidden;
    }

    .gallery-main{
      position:relative;
      width:100%;
      aspect-ratio:16/9;
      overflow:hidden;
      cursor:grab;
      user-select:none;
    }
    .gallery-main:active{cursor:grabbing}

    .slides-track{
      display:flex;
      height:100%;
      transition:transform 0.4s cubic-bezier(0.4,0,0.2,1);
      will-change:transform;
    }

    .slide{
      min-width:100%;height:100%;
      flex-shrink:0;position:relative;
    }
    .slide img{
      width:100%;height:100%;object-fit:cover;
      filter:brightness(0.9);
      pointer-events:none;
      display:block;
    }
    .slide-placeholder{
      width:100%;height:100%;
      display:flex;align-items:center;justify-content:center;
      color:rgba(255,255,255,0.08);font-size:4rem;
    }

    .gallery-shade{
      position:absolute;inset:0;
      background:linear-gradient(to bottom,transparent 50%,rgba(6,15,26,0.7) 100%);
      pointer-events:none;
    }

    /* Nav arrows */
    .gallery-prev,.gallery-next{
      position:absolute;top:50%;transform:translateY(-50%);
      width:40px;height:40px;
      background:rgba(6,15,26,0.7);
      border:1px solid var(--border);
      border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      cursor:pointer;color:var(--sand);
      transition:all var(--trans);
      backdrop-filter:blur(8px);
      z-index:10;
    }
    .gallery-prev{left:12px}
    .gallery-next{right:12px}
    .gallery-prev:hover,.gallery-next:hover{background:var(--gold);border-color:var(--gold);color:var(--navy)}

    /* Counter */
    .gallery-counter{
      position:absolute;bottom:14px;right:14px;
      padding:4px 10px;
      background:rgba(6,15,26,0.75);
      border:1px solid var(--border);
      border-radius:20px;
      font-family:'Montserrat',sans-serif;
      font-size:0.58rem;letter-spacing:0.12em;
      color:var(--sand);backdrop-filter:blur(6px);
    }

    /* Thumbnails */
    .gallery-thumbs{
      display:flex;gap:4px;
      padding:6px;
      background:#060F1A;
      overflow-x:auto;
      scrollbar-width:none;
    }
    .gallery-thumbs::-webkit-scrollbar{display:none}

    .thumb{
      flex-shrink:0;
      width:64px;height:48px;
      border-radius:3px;overflow:hidden;
      border:2px solid transparent;
      cursor:pointer;opacity:0.55;
      transition:all var(--trans);
    }
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .thumb.active{border-color:var(--gold);opacity:1}
    .thumb:hover{opacity:0.85}

    /* â•â•â• PROPERTY HEADER â•â•â• */
    .prop-header{
      padding:20px var(--px) 16px;
      border-bottom:1px solid var(--border);
    }

    .prop-id{
      font-family:'Montserrat',sans-serif;
      font-size:0.55rem;letter-spacing:0.25em;text-transform:uppercase;
      color:var(--teal);margin-bottom:8px;
    }

    .prop-title{
      font-family:'Cormorant Garamond',serif;
      font-size:clamp(1.6rem,5vw,2.4rem);
      font-weight:300;line-height:1.2;
      color:var(--white);margin-bottom:6px;
    }

    .prop-location{
      display:flex;align-items:center;gap:6px;
      font-size:0.88rem;color:var(--muted);margin-bottom:14px;
    }

    .prop-badges{
      display:flex;gap:8px;flex-wrap:wrap;
    }

    .badge{
      padding:4px 12px;border-radius:2px;
      font-family:'Montserrat',sans-serif;
      font-size:0.55rem;font-weight:600;letter-spacing:0.18em;text-transform:uppercase;
    }
    .badge-gold{background:linear-gradient(135deg,var(--gold),var(--gold-lt));color:var(--navy)}
    .badge-status{border-radius:20px;border:1px solid;display:flex;align-items:center;gap:5px}
    .badge-status .dot{width:5px;height:5px;border-radius:50%}
    .badge-av{border-color:var(--available);color:var(--available)}
    .badge-av .dot{background:var(--available);box-shadow:0 0 5px var(--available)}
    .badge-rs{border-color:var(--reserved);color:var(--reserved)}
    .badge-rs .dot{background:var(--reserved)}
    .badge-sd{border-color:var(--sold);color:var(--sold)}
    .badge-sd .dot{background:var(--sold)}
    .badge-rt{border-color:var(--rented);color:var(--rented)}
    .badge-rt .dot{background:var(--rented)}
    .badge-type{background:rgba(27,122,138,0.2);border:1px solid rgba(26,122,138,0.4);color:var(--teal)}

    /* â•â•â• PRICE BAR â•â•â• */
    .price-bar{
      padding:16px var(--px);
      background:rgba(17,34,56,0.6);
      border-bottom:1px solid var(--border);
      display:flex;gap:24px;flex-wrap:wrap;
      align-items:flex-end;
    }
    .price-block{}
    .price-lbl{
      font-family:'Montserrat',sans-serif;
      font-size:0.52rem;letter-spacing:0.18em;text-transform:uppercase;
      color:var(--muted);margin-bottom:4px;
    }
    .price-val{
      font-family:'Cormorant Garamond',serif;
      font-size:2rem;font-weight:300;
      background:linear-gradient(135deg,var(--gold),var(--gold-lt));
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      background-clip:text;line-height:1;
    }
    .price-val.secondary{font-size:1.3rem;color:var(--muted);-webkit-text-fill-color:var(--muted);background:none}
    .price-sqm{
      font-family:'Montserrat',sans-serif;
      font-size:0.72rem;color:var(--muted);margin-top:3px;
    }

    /* â•â•â• QUICK SPECS â•â•â• */
    .quick-specs{
      display:grid;grid-template-columns:repeat(3,1fr);
      gap:1px;background:var(--border);
      border-bottom:1px solid var(--border);
    }
    .qs-item{
      padding:14px 16px;
      background:rgba(17,34,56,0.5);
      text-align:center;
    }
    .qs-ico{font-size:1.2rem;margin-bottom:4px}
    .qs-val{
      font-family:'Cormorant Garamond',serif;
      font-size:1.1rem;font-weight:400;color:var(--white);
      line-height:1;margin-bottom:2px;
    }
    .qs-lbl{
      font-family:'Montserrat',sans-serif;
      font-size:0.5rem;letter-spacing:0.15em;text-transform:uppercase;color:var(--muted);
    }

    /* â•â•â• SECTIONS â•â•â• */
    .section{
      padding:20px var(--px);
      border-bottom:1px solid var(--border);
    }
    .section-title{
      font-family:'Montserrat',sans-serif;
      font-size:0.6rem;letter-spacing:0.25em;text-transform:uppercase;
      color:var(--teal);margin-bottom:14px;
      display:flex;align-items:center;gap:8px;
    }
    .section-title::after{
      content:'';flex:1;height:1px;
      background:linear-gradient(to right,var(--border),transparent);
    }

    /* Description */
    .description-text{
      font-size:0.92rem;line-height:1.85;color:var(--sand-dim);
    }

    /* Key points */
    .key-points{
      font-size:0.88rem;color:var(--sand-dim);
      line-height:1.7;
    }
    .key-points-list{
      list-style:none;display:flex;flex-direction:column;gap:6px;
    }
    .key-points-list li{
      display:flex;align-items:flex-start;gap:8px;
      font-size:0.88rem;color:var(--sand-dim);line-height:1.5;
    }
    .key-points-list li::before{
      content:'âœ¦';color:var(--gold);font-size:0.6rem;
      margin-top:3px;flex-shrink:0;
    }

    /* Details grid */
    .details-grid{
      display:grid;grid-template-columns:repeat(2,1fr);
      gap:10px;
    }
    .detail-item{
      padding:12px 14px;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
      border-radius:4px;
    }
    .detail-label{
      font-family:'Montserrat',sans-serif;
      font-size:0.52rem;letter-spacing:0.15em;text-transform:uppercase;
      color:var(--muted);margin-bottom:4px;
    }
    .detail-value{
      font-size:0.9rem;color:var(--white);font-weight:400;
    }

    /* â•â•â• FACILITIES â•â•â• */
    .facilities-list{
      display:flex;flex-wrap:wrap;gap:8px;
    }
    .fac-chip{
      padding:6px 12px;
      background:rgba(27,122,138,0.12);
      border:1px solid rgba(26,122,138,0.25);
      border-radius:20px;
      font-size:0.78rem;color:var(--teal);
    }

    /* â•â•â• MAP â•â•â• */
    .map-wrap{
      position:relative;
      border-radius:var(--radius);
      overflow:hidden;
      border:1px solid var(--border);
      aspect-ratio:16/9;
      background:rgba(17,34,56,0.5);
    }
    .map-wrap iframe{
      width:100%;height:100%;border:none;display:block;
    }
    .map-overlay-btn{
      position:absolute;bottom:12px;right:12px;
      display:flex;align-items:center;gap:6px;
      padding:8px 14px;
      background:var(--gold);
      color:var(--navy);
      font-family:'Montserrat',sans-serif;
      font-size:0.6rem;font-weight:600;letter-spacing:0.14em;
      text-transform:uppercase;text-decoration:none;
      border-radius:4px;
      transition:opacity var(--trans);
    }
    .map-overlay-btn:hover{opacity:0.85}

    /* â•â•â• DISTANCE TAGS â•â•â• */
    .distance-grid{
      display:grid;grid-template-columns:repeat(2,1fr);
      gap:8px;
    }
    .dist-item{
      display:flex;align-items:center;gap:10px;
      padding:10px 12px;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
      border-radius:4px;
    }
    .dist-ico{font-size:1.1rem}
    .dist-info{}
    .dist-lbl{font-size:0.72rem;color:var(--muted)}
    .dist-val{font-size:0.85rem;color:var(--white);font-weight:400}

    /* â•â•â• DOCUMENTS â•â•â• */
    .doc-list{display:flex;flex-direction:column;gap:8px}
    .doc-btn{
      display:flex;align-items:center;gap:12px;
      padding:12px 16px;
      background:rgba(255,255,255,0.03);
      border:1px solid var(--border);
      border-radius:4px;
      color:var(--sand);text-decoration:none;
      transition:all var(--trans);
    }
    .doc-btn:hover{
      border-color:rgba(201,168,76,0.4);
      background:rgba(201,168,76,0.08);
    }
    .doc-ico{
      width:36px;height:36px;border-radius:4px;
      background:rgba(201,168,76,0.15);
      display:flex;align-items:center;justify-content:center;
      color:var(--gold);font-size:1rem;flex-shrink:0;
    }
    .doc-name{
      font-family:'Montserrat',sans-serif;
      font-size:0.72rem;font-weight:500;color:var(--white);
      letter-spacing:0.04em;
    }
    .doc-sub{font-size:0.7rem;color:var(--muted);margin-top:2px}

    /* â•â•â• VIDEO â•â•â• */
    .video-wrap{
      position:relative;border-radius:var(--radius);overflow:hidden;
      aspect-ratio:16/9;background:#060F1A;
    }
    .video-wrap iframe{width:100%;height:100%;border:none}

    /* â•â•â• VIRTUAL TOUR â•â•â• */
    .vtour-btn{
      display:flex;align-items:center;justify-content:center;gap:10px;
      padding:16px;
      background:linear-gradient(135deg,rgba(27,79,114,0.4),rgba(26,122,138,0.3));
      border:1px solid rgba(26,122,138,0.3);
      border-radius:var(--radius);
      color:var(--white);text-decoration:none;
      font-family:'Montserrat',sans-serif;
      font-size:0.75rem;letter-spacing:0.15em;text-transform:uppercase;
      transition:all var(--trans);
    }
    .vtour-btn:hover{border-color:var(--teal);background:rgba(26,122,138,0.25)}

    /* â•â•â• CONTACT CTA â•â•â• */
    .contact-cta{
      padding:24px var(--px) 32px;
      text-align:center;
    }
    .cta-title{
      font-family:'Cormorant Garamond',serif;
      font-size:1.5rem;font-weight:300;color:var(--white);
      margin-bottom:6px;
    }
    .cta-sub{
      font-size:0.85rem;color:var(--muted);margin-bottom:20px;
    }
    .cta-buttons{
      display:grid;grid-template-columns:repeat(2,1fr);
      gap:8px;max-width:400px;margin:0 auto;
    }
    .cta-btn{
      display:flex;align-items:center;justify-content:center;gap:8px;
      padding:14px 16px;
      border-radius:var(--radius);
      font-family:'Montserrat',sans-serif;
      font-size:0.65rem;font-weight:600;letter-spacing:0.14em;text-transform:uppercase;
      text-decoration:none;transition:all var(--trans);
    }
    .cta-btn-primary{
      background:linear-gradient(135deg,var(--gold),var(--gold-lt));
      color:var(--navy);grid-column:1/-1;
    }
    .cta-btn-primary:hover{opacity:0.88;transform:translateY(-2px)}
    .cta-btn-line{background:#00B900;color:white}
    .cta-btn-wa{background:#25D366;color:white}
    .cta-btn-line:hover,.cta-btn-wa:hover{opacity:0.88;transform:translateY(-2px)}

    /* â•â•â• SHARE BAR â•â•â• */
    .share-bar{
      padding:16px var(--px);
      border-top:1px solid var(--border);
      display:flex;gap:8px;align-items:center;
      overflow-x:auto;scrollbar-width:none;
    }
    .share-bar::-webkit-scrollbar{display:none}
    .share-lbl{
      font-family:'Montserrat',sans-serif;
      font-size:0.55rem;letter-spacing:0.2em;text-transform:uppercase;
      color:var(--muted);white-space:nowrap;flex-shrink:0;
    }
    .share-btn{
      flex-shrink:0;
      padding:7px 14px;
      background:rgba(255,255,255,0.04);
      border:1px solid var(--border);
      border-radius:20px;
      color:var(--muted);text-decoration:none;
      font-family:'Montserrat',sans-serif;font-size:0.58rem;
      letter-spacing:0.1em;text-transform:uppercase;
      transition:all var(--trans);cursor:pointer;
    }
    .share-btn:hover{border-color:var(--gold);color:var(--gold)}

    /* â•â•â• RESPONSIVE â•â•â• */
    @media(min-width:768px){
      header{padding:0 var(--px-lg)}
      .prop-header,.price-bar,.section,.contact-cta,.share-bar{padding-left:var(--px-lg);padding-right:var(--px-lg)}
      .gallery-thumbs{padding:8px var(--px-lg)}
      .thumb{width:80px;height:60px}
      .details-grid{grid-template-columns:repeat(3,1fr)}
      .distance-grid{grid-template-columns:repeat(3,1fr)}
      .quick-specs{grid-template-columns:repeat(6,1fr)}
      .cta-buttons{grid-template-columns:1fr 1fr 1fr;max-width:520px}
      .cta-btn-primary{grid-column:1/-1}
    }

    @media(min-width:1100px){
      .gallery-main{aspect-ratio:21/9}
      .prop-header,.price-bar,.section,.contact-cta,.share-bar{padding-left:var(--px-lg);padding-right:var(--px-lg)}
      .details-grid{grid-template-columns:repeat(4,1fr)}
    }

    /* â•â•â• ANIMATIONS â•â•â• */
    @keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>
<body>

  <!-- LOADER -->
  <div class="page-loader" id="pageLoader">
    <div class="loader-ring"></div>
    <div class="loader-text">Loading Property</div>
  </div>

  <!-- HEADER -->
  <header>
    <a href="index.html" class="btn-back">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <polyline points="15,18 9,12 15,6"/>
      </svg>
      Back
    </a>
    <a href="index.html" class="logo">Hua Hin<span>.Properties</span></a>
    <div class="header-id" id="headerHpId">â€”</div>
  </header>

  <!-- ERROR STATE -->
  <div class="error-page" id="errorPage">
    <div style="font-size:3rem;margin-bottom:16px;opacity:0.2">âŒ‚</div>
    <div style="font-family:'Cormorant Garamond',serif;font-size:1.5rem;color:var(--white);margin-bottom:8px">à¹„à¸¡à¹ˆà¸à¸šà¸£à¸²à¸¢à¸à¸²à¸£à¸™à¸µà¹‰</div>
    <div style="font-size:0.88rem;color:var(--muted);margin-bottom:24px">Property à¸—à¸µà¹ˆà¸„à¸¸à¸“à¸„à¹‰à¸™à¸«à¸²à¹„à¸¡à¹ˆà¸¡à¸µà¹ƒà¸™à¸£à¸°à¸šà¸š à¸«à¸£à¸·à¸­à¸­à¸²à¸ˆà¸–à¸¹à¸à¸™à¸³à¸­à¸­à¸à¹à¸¥à¹‰à¸§</div>
    <a href="index.html" style="display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:linear-gradient(135deg,var(--gold),var(--gold-lt));color:var(--navy);font-family:'Montserrat',sans-serif;font-size:0.65rem;font-weight:600;letter-spacing:0.16em;text-transform:uppercase;text-decoration:none;border-radius:4px;">
      â† à¸”à¸¹à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
    </a>
  </div>

  <!-- MAIN CONTENT -->
  <div class="content" id="mainContent">

    <!-- GALLERY -->
    <div class="gallery-wrap">
      <div class="gallery-main" id="galleryMain">
        <div class="slides-track" id="slidesTrack">
          <!-- slides injected by JS -->
        </div>
        <div class="gallery-shade"></div>
        <button class="gallery-prev" id="galPrev" aria-label="Previous">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15,18 9,12 15,6"/></svg>
        </button>
        <button class="gallery-next" id="galNext" aria-label="Next">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9,18 15,12 9,6"/></svg>
        </button>
        <div class="gallery-counter" id="galCounter">1 / 1</div>
      </div>
      <div class="gallery-thumbs" id="galThumbs"></div>
    </div>

    <!-- PROPERTY HEADER -->
    <div class="prop-header">
      <div class="prop-id" id="propId"></div>
      <h1 class="prop-title" id="propTitle">â€”</h1>
      <div class="prop-location" id="propLocation"></div>
      <div class="prop-badges" id="propBadges"></div>
    </div>

    <!-- PRICE BAR -->
    <div class="price-bar" id="priceBar"></div>

    <!-- QUICK SPECS -->
    <div class="quick-specs" id="quickSpecs"></div>

    <!-- KEY SELLING POINTS -->
    <div class="section" id="secPoints" style="display:none">
      <div class="section-title">âœ¦ Key Highlights</div>
      <ul class="key-points-list" id="pointsList"></ul>
    </div>

    <!-- DESCRIPTION -->
    <div class="section" id="secDesc" style="display:none">
      <div class="section-title">ğŸ“‹ à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”</div>
      <div class="description-text" id="descText"></div>
    </div>

    <!-- PROPERTY DETAILS -->
    <div class="section" id="secDetails" style="display:none">
      <div class="section-title">ğŸ  à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸£à¸±à¸à¸¢à¹Œà¸ªà¸´à¸™</div>
      <div class="details-grid" id="detailsGrid"></div>
    </div>

    <!-- AREA & LAND -->
    <div class="section" id="secArea" style="display:none">
      <div class="section-title">ğŸ“ à¸‚à¸™à¸²à¸”à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆ</div>
      <div class="details-grid" id="areaGrid"></div>
    </div>

    <!-- OWNERSHIP -->
    <div class="section" id="secOwnership" style="display:none">
      <div class="section-title">ğŸ“„ à¸à¸£à¸£à¸¡à¸ªà¸´à¸—à¸˜à¸´à¹Œ</div>
      <div class="details-grid" id="ownershipGrid"></div>
    </div>

    <!-- FACILITIES -->
    <div class="section" id="secFacilities" style="display:none">
      <div class="section-title">âœ… à¸ªà¸´à¹ˆà¸‡à¸­à¸³à¸™à¸§à¸¢à¸„à¸§à¸²à¸¡à¸ªà¸°à¸”à¸§à¸</div>
      <div class="facilities-list" id="facilitiesList"></div>
    </div>

    <!-- VIRTUAL TOUR -->
    <div class="section" id="secVtour" style="display:none">
      <div class="section-title">ğŸŒ Virtual Tour</div>
      <a href="#" class="vtour-btn" id="vtourBtn" target="_blank" rel="noopener">
        <span>ğŸ¥½</span> à¹€à¸›à¸´à¸” Virtual Tour 360Â°
      </a>
    </div>

    <!-- VIDEO -->
    <div class="section" id="secVideo" style="display:none">
      <div class="section-title">ğŸ¬ à¸§à¸´à¸”à¸µà¹‚à¸­</div>
      <div class="video-wrap" id="videoWrap"></div>
    </div>

    <!-- MAP -->
    <div class="section" id="secMap" style="display:none">
      <div class="section-title">ğŸ“ à¸—à¸µà¹ˆà¸•à¸±à¹‰à¸‡</div>
      <div class="map-wrap" id="mapWrap">
        <a href="#" class="map-overlay-btn" id="mapLink" target="_blank" rel="noopener">
          ğŸ—º à¹€à¸›à¸´à¸”à¹ƒà¸™ Google Maps
        </a>
      </div>
    </div>

    <!-- DISTANCES -->
    <div class="section" id="secDist" style="display:none">
      <div class="section-title">ğŸ“ à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡</div>
      <div class="distance-grid" id="distGrid"></div>
    </div>

    <!-- DOCUMENTS -->
    <div class="section" id="secDocs" style="display:none">
      <div class="section-title">ğŸ“ à¹€à¸­à¸à¸ªà¸²à¸£</div>
      <div class="doc-list" id="docList"></div>
    </div>

    <!-- FACEBOOK -->
    <div class="section" id="secFb" style="display:none">
      <div class="section-title">ğŸ“± Facebook Post</div>
      <a href="#" class="doc-btn" id="fbLink" target="_blank" rel="noopener">
        <div class="doc-ico">ğŸ“˜</div>
        <div>
          <div class="doc-name">à¸”à¸¹à¹‚à¸à¸ªà¸•à¹Œà¸šà¸™ Facebook</div>
          <div class="doc-sub">à¸„à¸¥à¸´à¸à¹€à¸à¸·à¹ˆà¸­à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡</div>
        </div>
      </a>
    </div>

    <!-- CONTACT CTA -->
    <div class="contact-cta">
      <div class="cta-title">à¸ªà¸™à¹ƒà¸ˆà¸—à¸£à¸±à¸à¸¢à¹Œà¸ªà¸´à¸™à¸™à¸µà¹‰?</div>
      <div class="cta-sub">à¸•à¸´à¸”à¸•à¹ˆà¸­à¹€à¸£à¸²à¹„à¸”à¹‰à¹€à¸¥à¸¢ â€” à¸—à¸µà¸¡à¸‡à¸²à¸™à¸à¸£à¹‰à¸­à¸¡à¹ƒà¸«à¹‰à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸¸à¸à¸§à¸±à¸™</div>
      <div class="cta-buttons">
        <a href="https://wa.me/66805820777?text=Interested" target="_blank" rel="noopener" class="cta-btn cta-btn-wa" id="ctaWa">
          ğŸ“± WhatsApp
        </a>
        <a href="https://line.me/R/ti/p/@qap7218t" target="_blank" rel="noopener" class="cta-btn cta-btn-line">
          ğŸ’¬ LINE OA
        </a>
        <a href="tel:+66805820777" class="cta-btn cta-btn-primary">
          ğŸ“ à¹‚à¸—à¸£à¸ªà¸²à¸¢à¸”à¹ˆà¸§à¸™ +66 80 582 0777
        </a>
      </div>
    </div>

    <!-- SHARE BAR -->
    <div class="share-bar">
      <span class="share-lbl">Share:</span>
      <button class="share-btn" onclick="copyLink()">ğŸ”— Copy Link</button>
      <a href="#" class="share-btn" id="shareFb" target="_blank">ğŸ“˜ Facebook</a>
      <a href="#" class="share-btn" id="shareWa" target="_blank">ğŸ“± WhatsApp</a>
      <a href="#" class="share-btn" id="shareLine" target="_blank">ğŸ’¬ LINE</a>
    </div>

  </div><!-- /content -->

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CONFIG
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyOnZc6s05eGvHR5XmRnRPAat8vNZpf8cFhL2GiAFjWld-2OBf2OqgP07RU07UTZgDXxA/exec';
    const SHEET_ID   = '1vFsPw6GRO8kd_vHDhbV-Y-t11WTOfyv0E18TH0Nuy74';
    const SHEET_NAME = 'properties';
    const SHEET_URL  = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(SHEET_NAME)}`;

    // Fields that are PUBLIC (shown to visitors)
    // Private fields (Commission, Owner_Contact, Internal_Note, Agent_PDF, Agent_Talking_Points etc.) are NOT included
    const PUBLIC_FIELDS = [
      'HP_ID','Listing_Type','Status','System_Status','Badge','Featured',
      'Project_Name','Type','Plot','Bedrooms','Bathrooms','Parking',
      'Furnishing','Kitchen_Type','Year_Built',
      'Land_Area_sq_w','Land_Area_sq_m','Living_Area_sq_m',
      'Pool_Size','Pool_Depth',
      'Direction','View_Type',
      'Pet_Friendly','Extras','Electricity','Water_Source',
      'Sale_Price','Monthly_Rent','Price_sq_m',
      'Ownership_Type','Land_Title_Deed_Type','Transfer_Expenses','Common_Fee',
      'Address','District','SubDistrict','Zone',
      'Map_Link','Distance_to_Beach','Key_Location_Distance',
      'Thumbnail_Image','Album_Image','Virtual_Tour','Video_Link',
      'FB_Link','FloorPlan_PDF','Material_PDF',
      'Key_Selling_Points','Description',
      'Customer_PDF'
    ];

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // GET HP_ID FROM URL
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const urlParams = new URLSearchParams(window.location.search);
    const targetId  = decodeURIComponent(urlParams.get('id') || '');

    if (!targetId) {
      showError();
    } else {
      document.getElementById('headerHpId').textContent = targetId;
      fetchProperty();
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // FETCH
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    async function fetchProperty() {
      let prop = null;

      // Try Apps Script first
      try {
        const r = await fetch(`${SCRIPT_URL}?mode=getUnitDetail&id=${encodeURIComponent(targetId)}`, {
          signal: AbortSignal.timeout(7000)
        });
        if (r.ok) {
          const j = await r.json();
          if (j && j.data) { prop = filterPublic(j.data); }
        }
      } catch (_) {}

      // Fallback: scan Sheet
      if (!prop) {
        try {
          const r = await fetch(SHEET_URL);
          const t = await r.text();
          const j = JSON.parse(t.slice(t.indexOf('{'), t.lastIndexOf('}') + 1));
          const cols = j.table.cols.map(c => c.label);
          const rows = j.table.rows.map(row => {
            const o = {};
            cols.forEach((c, i) => { o[c] = row.c?.[i]?.v != null ? String(row.c[i].v) : ''; });
            return o;
          });
          const found = rows.find(r => r['HP_ID'] === targetId);
          if (found) prop = filterPublic(found);
        } catch (_) {}
      }

      if (!prop || prop['System_Status'] !== 'Live') {
        showError(); return;
      }

      renderProperty(prop);
    }

    function filterPublic(p) {
      const o = {};
      PUBLIC_FIELDS.forEach(k => { if (p[k] !== undefined) o[k] = p[k]; });
      // Always include System_Status for live check
      o['System_Status'] = p['System_Status'] || '';
      return o;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // HELPERS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function val(p, key) { return (p[key] || '').trim().replace(/^#$/, ''); }
    function has(p, key) { const v = val(p, key); return v !== '' && v !== '0' && v !== 'undefined'; }

    function fmtPrice(s) {
      if (!s || s === '#') return null;
      const n = parseFloat(s.replace(/[^\d.]/g, ''));
      if (!n) return null;
      if (n >= 1e6) return 'à¸¿' + (n/1e6).toFixed(2).replace(/\.?0+$/, '') + ' Million';
      if (n >= 1e3) return 'à¸¿' + Math.round(n/1e3).toLocaleString() + ',000';
      return 'à¸¿' + n.toLocaleString();
    }

    function getYoutubeId(url) {
      const m = url.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|shorts\/))([^&?\s]+)/);
      return m ? m[1] : null;
    }

    function getGmapsEmbedSrc(url) {
      // Extract query from various Google Maps URL formats
      const qMatch = url.match(/[?&]q=([^&]+)/);
      if (qMatch) return `https://maps.google.com/maps?q=${qMatch[1]}&output=embed`;
      // Try coordinates
      const coordMatch = url.match(/@(-?\d+\.\d+),(-?\d+\.\d+)/);
      if (coordMatch) return `https://maps.google.com/maps?q=${coordMatch[1]},${coordMatch[2]}&output=embed&zoom=15`;
      return null;
    }

    function makeImageUrl(fileId) {
      if (!fileId) return null;
      fileId = fileId.trim();
      // Already full URL
      if (fileId.startsWith('http')) return fileId;
      // Just an ID
      return `https://lh3.googleusercontent.com/d/${fileId}`;
    }

    function parseAlbum(albumStr) {
      if (!albumStr || albumStr === '#') return [];
      return albumStr.split(',')
        .map(s => s.trim())
        .filter(Boolean)
        .map(s => makeImageUrl(s))
        .filter(Boolean);
    }

    function statusBadgeHtml(status) {
      const cls = {Available:'av',Reserved:'rs',Sold:'sd',Rented:'rt'}[status] || 'av';
      return `<div class="badge badge-status badge-${cls}"><span class="dot"></span>${status}</div>`;
    }

    function detailItem(label, value) {
      if (!value || value.trim() === '' || value === '#') return '';
      return `<div class="detail-item"><div class="detail-label">${label}</div><div class="detail-value">${value}</div></div>`;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // RENDER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function renderProperty(p) {

      // â”€â”€ Page title â”€â”€
      const projName = val(p, 'Project_Name');
      const type     = val(p, 'Type');
      const zone     = val(p, 'Zone') || val(p, 'District');
      const titleStr = [projName, type].filter(Boolean).join(' Â· ');
      document.title = `${titleStr || targetId} | Hua Hin Properties`;

      // â”€â”€ GALLERY â”€â”€
      buildGallery(p);

      // â”€â”€ PROPERTY HEADER â”€â”€
      document.getElementById('propId').textContent = val(p, 'HP_ID');
      document.getElementById('propTitle').textContent = titleStr || 'Property';

      // Location
      const locParts = [val(p,'SubDistrict'), val(p,'District'), val(p,'Zone')].filter(Boolean);
      const locEl = document.getElementById('propLocation');
      if (locParts.length) {
        locEl.innerHTML = `<span>ğŸ“</span> ${locParts.join(' Â· ')}`;
      }

      // Badges
      const badgesEl = document.getElementById('propBadges');
      let badgesHtml = '';
      if (has(p,'Badge')) badgesHtml += `<div class="badge badge-gold">${val(p,'Badge')}</div>`;
      badgesHtml += statusBadgeHtml(val(p,'Status') || 'Available');
      if (has(p,'Type'))         badgesHtml += `<div class="badge badge-type">${val(p,'Type')}</div>`;
      if (has(p,'Listing_Type')) badgesHtml += `<div class="badge badge-type">${val(p,'Listing_Type')}</div>`;
      badgesEl.innerHTML = badgesHtml;

      // â”€â”€ PRICE BAR â”€â”€
      const salePrice = val(p,'Sale_Price');
      const rentPrice = val(p,'Monthly_Rent');
      const sqmPrice  = val(p,'Price_sq_m');
      const lt        = val(p,'Listing_Type');
      let priceHtml   = '';

      if (salePrice) {
        priceHtml += `<div class="price-block">
          <div class="price-lbl">Sale Price</div>
          <div class="price-val">${fmtPrice(salePrice) || salePrice}</div>
          ${sqmPrice ? `<div class="price-sqm">à¸¿${sqmPrice} / mÂ²</div>` : ''}
        </div>`;
      }
      if (rentPrice) {
        priceHtml += `<div class="price-block">
          <div class="price-lbl">Monthly Rent</div>
          <div class="price-val ${salePrice ? 'secondary' : ''}">${fmtPrice(rentPrice) || rentPrice}<span style="font-size:0.9rem;opacity:0.6"> /mo</span></div>
        </div>`;
      }
      if (!priceHtml) priceHtml = `<div class="price-block"><div class="price-lbl">Price</div><div class="price-val">â€”</div></div>`;
      document.getElementById('priceBar').innerHTML = priceHtml;

      // â”€â”€ QUICK SPECS â”€â”€
      const specs = [
        { ico:'ğŸ›', val:val(p,'Bedrooms'), lbl:'Bedrooms' },
        { ico:'ğŸš¿', val:val(p,'Bathrooms'), lbl:'Bathrooms' },
        { ico:'ğŸš—', val:val(p,'Parking'), lbl:'Parking' },
        { ico:'ğŸŠ', val:val(p,'Pool_Size'), lbl:'Pool' },
        { ico:'ğŸ“', val:val(p,'Living_Area_sq_m') ? val(p,'Living_Area_sq_m')+'mÂ²' : '', lbl:'Living Area' },
        { ico:'ğŸŒ¿', val:val(p,'Land_Area_sq_w') ? val(p,'Land_Area_sq_w')+' sq.w' : '', lbl:'Land' },
      ].filter(s => s.val);

      document.getElementById('quickSpecs').innerHTML = specs.map(s =>
        `<div class="qs-item"><div class="qs-ico">${s.ico}</div><div class="qs-val">${s.val}</div><div class="qs-lbl">${s.lbl}</div></div>`
      ).join('');

      // â”€â”€ KEY SELLING POINTS â”€â”€
      const pts = val(p,'Key_Selling_Points');
      if (pts) {
        const items = pts.split(/[,ØŒØŒ]|\n/).map(s => s.trim()).filter(Boolean);
        if (items.length) {
          document.getElementById('secPoints').style.display = '';
          document.getElementById('pointsList').innerHTML = items.map(i => `<li>${i}</li>`).join('');
        }
      }

      // â”€â”€ DESCRIPTION â”€â”€
      const desc = val(p,'Description');
      if (desc) {
        document.getElementById('secDesc').style.display = '';
        document.getElementById('descText').textContent = desc;
      }

      // â”€â”€ PROPERTY DETAILS â”€â”€
      const detailsItems = [
        detailItem('Property Type', val(p,'Type')),
        detailItem('Furnishing', val(p,'Furnishing')),
        detailItem('Kitchen', val(p,'Kitchen_Type')),
        detailItem('Year Built', val(p,'Year_Built')),
        detailItem('Direction', val(p,'Direction')),
        detailItem('View', val(p,'View_Type')),
        detailItem('Pet Friendly', val(p,'Pet_Friendly')),
        detailItem('Electricity', val(p,'Electricity')),
        detailItem('Water Source', val(p,'Water_Source')),
        detailItem('Plot No.', val(p,'Plot')),
      ].filter(Boolean).join('');
      if (detailsItems) {
        document.getElementById('secDetails').style.display = '';
        document.getElementById('detailsGrid').innerHTML = detailsItems;
      }

      // â”€â”€ AREA â”€â”€
      const areaItems = [
        detailItem('Land Area', val(p,'Land_Area_sq_w') ? val(p,'Land_Area_sq_w')+' Sq.Wah' : ''),
        detailItem('Land Area (mÂ²)', val(p,'Land_Area_sq_m') ? val(p,'Land_Area_sq_m')+' mÂ²' : ''),
        detailItem('Living Area', val(p,'Living_Area_sq_m') ? val(p,'Living_Area_sq_m')+' mÂ²' : ''),
        detailItem('Pool Size', val(p,'Pool_Size')),
        detailItem('Pool Depth', val(p,'Pool_Depth')),
      ].filter(Boolean).join('');
      if (areaItems) {
        document.getElementById('secArea').style.display = '';
        document.getElementById('areaGrid').innerHTML = areaItems;
      }

      // â”€â”€ OWNERSHIP â”€â”€
      const ownItems = [
        detailItem('Ownership Type', val(p,'Ownership_Type')),
        detailItem('Title Deed', val(p,'Land_Title_Deed_Type')),
        detailItem('Transfer Cost', val(p,'Transfer_Expenses')),
        detailItem('Common Fee', val(p,'Common_Fee')),
      ].filter(Boolean).join('');
      if (ownItems) {
        document.getElementById('secOwnership').style.display = '';
        document.getElementById('ownershipGrid').innerHTML = ownItems;
      }

      // â”€â”€ FACILITIES â”€â”€
      const extras = val(p,'Extras');
      if (extras) {
        const chips = extras.split(/[,]/).map(s => s.trim()).filter(Boolean);
        if (chips.length) {
          document.getElementById('secFacilities').style.display = '';
          document.getElementById('facilitiesList').innerHTML = chips.map(c => `<div class="fac-chip">âœ“ ${c}</div>`).join('');
        }
      }

      // â”€â”€ VIRTUAL TOUR â”€â”€
      const vtour = val(p,'Virtual_Tour');
      if (vtour) {
        document.getElementById('secVtour').style.display = '';
        document.getElementById('vtourBtn').href = vtour;
      }

      // â”€â”€ VIDEO â”€â”€
      const videoUrl = val(p,'Video_Link');
      if (videoUrl) {
        const ytId = getYoutubeId(videoUrl);
        if (ytId) {
          document.getElementById('secVideo').style.display = '';
          document.getElementById('videoWrap').innerHTML =
            `<iframe src="https://www.youtube.com/embed/${ytId}?rel=0" allowfullscreen loading="lazy"></iframe>`;
        }
      }

      // â”€â”€ MAP â”€â”€
      const mapLink = val(p,'Map_Link');
      if (mapLink) {
        document.getElementById('secMap').style.display = '';
        document.getElementById('mapLink').href = mapLink;
        const embedSrc = getGmapsEmbedSrc(mapLink);
        if (embedSrc) {
          document.getElementById('mapWrap').innerHTML = `
            <iframe src="${embedSrc}" loading="lazy" allowfullscreen></iframe>
            <a href="${mapLink}" class="map-overlay-btn" target="_blank" rel="noopener">ğŸ—º à¹€à¸›à¸´à¸”à¹ƒà¸™ Google Maps</a>`;
        } else {
          document.getElementById('mapWrap').innerHTML = `
            <div style="height:100%;display:flex;align-items:center;justify-content:center">
              <a href="${mapLink}" class="map-overlay-btn" target="_blank" rel="noopener" style="position:static">ğŸ—º à¹€à¸›à¸´à¸”à¹ƒà¸™ Google Maps</a>
            </div>`;
        }
      }

      // â”€â”€ DISTANCES â”€â”€
      const beach   = val(p,'Distance_to_Beach');
      const keyLoc  = val(p,'Key_Location_Distance');
      const distItems = [];
      if (beach)  distItems.push({ico:'ğŸ–',lbl:'à¸Šà¸²à¸¢à¸«à¸²à¸”',val:beach});
      if (keyLoc) distItems.push({ico:'ğŸ“',lbl:'à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸',val:keyLoc});
      if (distItems.length) {
        document.getElementById('secDist').style.display = '';
        document.getElementById('distGrid').innerHTML = distItems.map(d =>
          `<div class="dist-item"><div class="dist-ico">${d.ico}</div><div class="dist-info"><div class="dist-lbl">${d.lbl}</div><div class="dist-val">${d.val}</div></div></div>`
        ).join('');
      }

      // â”€â”€ DOCUMENTS â”€â”€
      const docs = [];
      const fp = val(p,'FloorPlan_PDF');
      const mp = val(p,'Material_PDF');
      const cp = val(p,'Customer_PDF');
      if (fp) docs.push({ico:'ğŸ“',name:'Floor Plan',sub:'PDF',href:fp});
      if (mp) docs.push({ico:'ğŸ“‹',name:'Material Spec',sub:'PDF',href:mp});
      if (cp) docs.push({ico:'ğŸ“„',name:'Property Brochure',sub:'PDF â€” à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²',href:cp});
      if (docs.length) {
        document.getElementById('secDocs').style.display = '';
        document.getElementById('docList').innerHTML = docs.map(d =>
          `<a href="${d.href}" class="doc-btn" target="_blank" rel="noopener">
            <div class="doc-ico">${d.ico}</div>
            <div><div class="doc-name">${d.name}</div><div class="doc-sub">${d.sub}</div></div>
          </a>`
        ).join('');
      }

      // â”€â”€ FACEBOOK â”€â”€
      const fbLink = val(p,'FB_Link');
      if (fbLink) {
        document.getElementById('secFb').style.display = '';
        document.getElementById('fbLink').href = fbLink;
      }

      // â”€â”€ WhatsApp CTA with property info â”€â”€
      const propMsg = `à¸ªà¸™à¹ƒà¸ˆà¸—à¸£à¸±à¸à¸¢à¹Œà¸ªà¸´à¸™ ${val(p,'HP_ID')} â€” ${titleStr} â€” ${window.location.href}`;
      document.getElementById('ctaWa').href = `https://wa.me/66805820777?text=${encodeURIComponent(propMsg)}`;

      // â”€â”€ SHARE BUTTONS â”€â”€
      const pageUrl = window.location.href;
      const shareTitle = encodeURIComponent(`${titleStr} | Hua Hin Properties`);
      document.getElementById('shareFb').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(pageUrl)}`;
      document.getElementById('shareWa').href = `https://wa.me/?text=${encodeURIComponent(titleStr + ' ' + pageUrl)}`;
      document.getElementById('shareLine').href = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(pageUrl)}`;

      // â”€â”€ SHOW CONTENT â”€â”€
      document.getElementById('pageLoader').classList.add('hidden');
      document.getElementById('mainContent').classList.add('show');
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // GALLERY
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    let curSlide = 0;
    let totalSlides = 0;
    let startX = 0;
    let isDragging = false;

    function buildGallery(p) {
      const thumb   = makeImageUrl(val(p,'Thumbnail_Image'));
      const albumStr = val(p,'Album_Image');
      let images = parseAlbum(albumStr);

      // Prepend thumbnail if not already in album
      if (thumb && !images.includes(thumb)) {
        images.unshift(thumb);
      }
      if (!images.length && thumb) images = [thumb];
      if (!images.length) {
        images = [null]; // placeholder
      }

      totalSlides = images.length;

      // Slides
      const track = document.getElementById('slidesTrack');
      track.innerHTML = images.map((img, i) => `
        <div class="slide">
          ${img
            ? `<img src="${img}" alt="Property photo ${i+1}" loading="${i===0?'eager':'lazy'}"
                onerror="this.parentElement.innerHTML='<div class=\\'slide-placeholder\\'>âŒ‚</div>'">`
            : `<div class="slide-placeholder">âŒ‚</div>`
          }
        </div>
      `).join('');

      // Thumbnails
      const thumbsEl = document.getElementById('galThumbs');
      if (images.length > 1) {
        thumbsEl.innerHTML = images.map((img, i) => `
          <div class="thumb ${i===0?'active':''}" data-idx="${i}">
            ${img
              ? `<img src="${img}" alt="thumb ${i+1}" loading="lazy">`
              : `<div style="width:100%;height:100%;background:#1a3350;display:flex;align-items:center;justify-content:center;font-size:1.2rem">âŒ‚</div>`
            }
          </div>
        `).join('');
        thumbsEl.querySelectorAll('.thumb').forEach(t => {
          t.addEventListener('click', () => goSlide(parseInt(t.dataset.idx)));
        });
      } else {
        thumbsEl.style.display = 'none';
      }

      // Hide nav if single image
      if (images.length <= 1) {
        document.getElementById('galPrev').style.display = 'none';
        document.getElementById('galNext').style.display = 'none';
        document.getElementById('galCounter').style.display = 'none';
      }

      updateGallery();

      // Nav buttons
      document.getElementById('galPrev').addEventListener('click', () => goSlide(curSlide - 1));
      document.getElementById('galNext').addEventListener('click', () => goSlide(curSlide + 1));

      // Touch / drag
      const main = document.getElementById('galleryMain');
      main.addEventListener('touchstart', e => { startX = e.touches[0].clientX; }, {passive:true});
      main.addEventListener('touchend',   e => {
        const dx = e.changedTouches[0].clientX - startX;
        if (Math.abs(dx) > 40) goSlide(curSlide + (dx < 0 ? 1 : -1));
      });
      main.addEventListener('mousedown', e => { startX = e.clientX; isDragging = true; });
      main.addEventListener('mouseup',   e => {
        if (!isDragging) return; isDragging = false;
        const dx = e.clientX - startX;
        if (Math.abs(dx) > 40) goSlide(curSlide + (dx < 0 ? 1 : -1));
      });

      // Keyboard
      document.addEventListener('keydown', e => {
        if (e.key === 'ArrowLeft')  goSlide(curSlide - 1);
        if (e.key === 'ArrowRight') goSlide(curSlide + 1);
      });
    }

    function goSlide(idx) {
      curSlide = (idx + totalSlides) % totalSlides;
      updateGallery();
    }

    function updateGallery() {
      document.getElementById('slidesTrack').style.transform = `translateX(-${curSlide * 100}%)`;
      document.getElementById('galCounter').textContent = `${curSlide + 1} / ${totalSlides}`;
      document.querySelectorAll('.thumb').forEach((t, i) => {
        t.classList.toggle('active', i === curSlide);
      });
      // Scroll active thumb into view
      const activeThumb = document.querySelector('.thumb.active');
      if (activeThumb) activeThumb.scrollIntoView({behavior:'smooth',inline:'center',block:'nearest'});
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ERROR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function showError() {
      document.getElementById('pageLoader').classList.add('hidden');
      document.getElementById('errorPage').classList.add('show');
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // COPY LINK
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    async function copyLink() {
      try {
        await navigator.clipboard.writeText(window.location.href);
        const btn = document.querySelector('.share-btn');
        const orig = btn.textContent;
        btn.textContent = 'âœ“ Copied!';
        setTimeout(() => btn.textContent = orig, 2000);
      } catch (_) {}
    }
  </script>
</body>
</html>
